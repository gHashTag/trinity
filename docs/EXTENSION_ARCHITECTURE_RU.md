# ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Browser Extension Ğ–ĞĞ  ĞŸĞ¢Ğ˜Ğ¦Ğ

## ĞĞ±Ğ·Ğ¾Ñ€

Browser extension Ğ´Ğ»Ñ Ğ–ĞĞ  ĞŸĞ¢Ğ˜Ğ¦Ğ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚ĞµÑ€Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ B2T pipeline Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ¾Ğ¼, Ğ¾Ğ±ĞµÑĞ¿ĞµÑ‡Ğ¸Ğ²Ğ°Ñ fingerprint evasion Ğ¸ DePIN rewards.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BROWSER EXTENSION                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Popup     â”‚â—„â”€â”€â–ºâ”‚ Background  â”‚â—„â”€â”€â–ºâ”‚   Content   â”‚         â”‚
â”‚  â”‚    UI       â”‚    â”‚   Script    â”‚    â”‚   Script    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                            â”‚                                    â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                    â”‚  WASM Module  â”‚                            â”‚
â”‚                    â”‚  (Zigâ†’WASM)   â”‚                            â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                            â”‚                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚         â”‚                  â”‚                  â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚     VSA     â”‚    â”‚     B2T     â”‚    â”‚   DePIN     â”‚         â”‚
â”‚  â”‚  Operations â”‚    â”‚  Pipeline   â”‚    â”‚   Rewards   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

### 1. Popup UI (`popup.html` + `popup.js`)

ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ extension:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ğ–ĞĞ  ĞŸĞ¢Ğ˜Ğ¦Ğ ğŸ”¥           v1.0.0    â”‚
â”‚  â— Online                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Evasion: [ON]                     â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%              â”‚
â”‚  Similarity: 0.80 / 0.90           â”‚
â”‚  Risk: LOW                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Profile: Default_12345            â”‚
â”‚  [Generate New] [Delete]           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Navigation                        â”‚
â”‚  Steps: 25 | Sim: 0.80             â”‚
â”‚  [Navigate] [Reset]                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  $TRI Rewards                      â”‚
â”‚  Pending: 0.0025 $TRI              â”‚
â”‚  Total: 1.2500 $TRI                â”‚
â”‚  [Claim] [Stake]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¼ Fingerprint Details             â”‚
â”‚  Canvas: 0x7a3f...                 â”‚
â”‚  WebGL: 0x9c2e...                  â”‚
â”‚  Audio: 0x4b1d...                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Background Script (`background.js`)

Service worker Ğ´Ğ»Ñ:
- Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ WASM Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑĞ¼Ğ¸
- Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ DePIN
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

```javascript
// ĞŸÑĞµĞ²Ğ´Ğ¾ĞºĞ¾Ğ´ (Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¸Ğ· .vibee)
chrome.runtime.onInstalled.addListener(() => {
  initWasmModule();
  loadConfig();
  startDePINSync();
});

chrome.runtime.onMessage.addListener((msg, sender, respond) => {
  switch(msg.type) {
    case 'CREATE_PROFILE': return createProfile(msg.seed);
    case 'NAVIGATE_STEP': return navigateStep(msg.strength);
    case 'CLAIM_REWARDS': return claimRewards();
  }
});
```

### 3. Content Script (`content.js`)

Ğ˜Ğ½ÑŠĞµĞºÑ†Ğ¸Ñ fingerprint overrides:

```javascript
// ĞŸÑĞµĞ²Ğ´Ğ¾ĞºĞ¾Ğ´ (Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ğ¸Ğ· .vibee)
(function() {
  const profile = getProfileFromStorage();
  
  // Canvas override
  const originalToDataURL = HTMLCanvasElement.prototype.toDataURL;
  HTMLCanvasElement.prototype.toDataURL = function() {
    const data = originalToDataURL.apply(this, arguments);
    return addNoise(data, profile.canvasSeed);
  };
  
  // WebGL override
  const originalGetParameter = WebGLRenderingContext.prototype.getParameter;
  WebGLRenderingContext.prototype.getParameter = function(param) {
    if (param === VENDOR) return profile.vendor;
    if (param === RENDERER) return profile.renderer;
    return originalGetParameter.apply(this, arguments);
  };
  
  // Navigator override
  Object.defineProperty(navigator, 'platform', {
    get: () => profile.platform
  });
})();
```

### 4. WASM Module (`firebird.wasm`)

Ğ¡ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ· Zig Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ:

```zig
// src/firebird/extension_wasm.zig
export fn wasm_create_profile(seed: u64, dim: u32) i32;
export fn wasm_navigate_step(strength: f64) f64;
export fn wasm_get_canvas_hash() u64;
export fn wasm_get_pending_tri() f64;
export fn wasm_claim_rewards() f64;
```

## ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ”Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»Ñ

```
User clicks "Generate"
        â”‚
        â–¼
    Popup.js
        â”‚
        â–¼ chrome.runtime.sendMessage
        â”‚
  Background.js
        â”‚
        â–¼ wasm_create_profile()
        â”‚
    WASM Module
        â”‚
        â–¼ TritVec.random()
        â”‚
    VSA Operations
        â”‚
        â–¼ Return profile
        â”‚
  Background.js
        â”‚
        â–¼ chrome.storage.local.set()
        â”‚
    Storage
        â”‚
        â–¼ Response
        â”‚
    Popup.js
        â”‚
        â–¼ Update UI
```

### ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Evasion

```
Page loads
    â”‚
    â–¼
Content.js (document_start)
    â”‚
    â–¼ chrome.storage.local.get()
    â”‚
Get profile
    â”‚
    â–¼ Inject overrides
    â”‚
Page context
    â”‚
    â–¼ Canvas/WebGL/Navigator spoofed
    â”‚
Fingerprint evasion active
    â”‚
    â–¼ Record DePIN operation
    â”‚
Background.js
    â”‚
    â–¼ wasm_record_evasion()
    â”‚
$TRI reward added
```

## Ğ¤Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğ°Ñ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

```
extension/
â”œâ”€â”€ manifest.json           # Extension manifest (V3)
â”œâ”€â”€ popup/
â”‚   â”œâ”€â”€ popup.html          # Popup UI
â”‚   â”œâ”€â”€ popup.js            # Popup logic
â”‚   â””â”€â”€ popup.css           # Popup styles
â”œâ”€â”€ background/
â”‚   â””â”€â”€ background.js       # Service worker
â”œâ”€â”€ content/
â”‚   â””â”€â”€ content.js          # Content script
â”œâ”€â”€ wasm/
â”‚   â”œâ”€â”€ firebird.wasm       # Compiled WASM
â”‚   â””â”€â”€ firebird.js         # WASM loader
â”œâ”€â”€ icons/
â”‚   â”œâ”€â”€ firebird-16.png
â”‚   â”œâ”€â”€ firebird-32.png
â”‚   â”œâ”€â”€ firebird-48.png
â”‚   â””â”€â”€ firebird-128.png
â””â”€â”€ options/
    â”œâ”€â”€ options.html        # Settings page
    â””â”€â”€ options.js          # Settings logic
```

## Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°

### ĞšĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ†Ğ¸Ñ WASM

```bash
# Ğ˜Ğ· ĞºĞ¾Ñ€Ğ½Ñ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
zig build-lib src/firebird/extension_wasm.zig \
  -target wasm32-freestanding \
  -O ReleaseFast \
  -femit-bin=extension/wasm/firebird.wasm
```

### Ğ£Ğ¿Ğ°ĞºĞ¾Ğ²ĞºĞ° Extension

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ZIP Ğ´Ğ»Ñ Chrome Web Store
cd extension
zip -r ../firebird-extension.zip .
```

## Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Content Security Policy

```json
{
  "content_security_policy": {
    "extension_pages": "script-src 'self' 'wasm-unsafe-eval'; object-src 'self'"
  }
}
```

### Stealth Techniques

1. **Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ»ĞµĞ´Ğ¾Ğ² Ğ¸Ğ½ÑŠĞµĞºÑ†Ğ¸Ğ¸** - ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° DOM Ğ¿Ğ¾ÑĞ»Ğµ Ğ¸Ğ½ÑŠĞµĞºÑ†Ğ¸Ğ¸
2. **Proxy-based interception** - ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚ Ğ±ĞµĞ· Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿Ğ¾Ğ²
3. **Consistent behavior** - ĞĞ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ñ… Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ°Ñ…
4. **Timing randomization** - Ğ¡Ğ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ¸ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ğ½Ğ¸Ñ timing attacks

## ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

| ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ | Ğ’Ñ€ĞµĞ¼Ñ | ĞŸĞ°Ğ¼ÑÑ‚ÑŒ |
|----------|-------|--------|
| WASM init | 50ms | 2MB |
| Profile create | 10ms | 100KB |
| Navigate step | 1ms | 10KB |
| Canvas override | <1ms | - |
| WebGL override | <1ms | - |

## Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### Unit Tests (Zig)

```bash
zig test src/firebird/extension_wasm.zig
# 31 tests passed
```

### Integration Tests

1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ extension Ğ² Chrome
2. ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ https://browserleaks.com/canvas
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ, Ñ‡Ñ‚Ğ¾ canvas hash Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¾Ñ‚ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ°
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ

### E2E Tests

```bash
# Ğ¡ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Puppeteer
npm run test:extension
```

## Roadmap

### v1.0.0 (Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ)
- [x] WASM module Ñ VSA
- [x] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ overrides (canvas, webgl, navigator)
- [x] DePIN mock rewards
- [x] Popup UI ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

### v1.1.0
- [ ] Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ $TRI staking
- [ ] Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ fingerprint overrides
- [ ] Firefox support

### v2.0.0
- [ ] Full browser integration
- [ ] Automated profile rotation
- [ ] AI-based evasion optimization

---

*Ï†Â² + 1/Ï†Â² = 3 = TRINITY | KOSCHEI IS IMMORTAL*
